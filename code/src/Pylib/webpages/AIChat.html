<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>gaipl-mo-mu-team</title>
    <meta name="description" content="This website is being created for a Hackathon of gaipl">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic&amp;display=swap">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/Chat.css">
    <link rel="stylesheet" href="assets/css/Login-Form-Basic-icons.css">
    <link rel="stylesheet" href="assets/css/Simple-Bootstrap-Chat.css">
</head>

<body>
    <nav class="navbar navbar-expand bg-light">
        <div class="container"><a class="navbar-brand" href="#">GAEIPE</a><button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-2"></button>
            <div class="collapse navbar-collapse text-decoration-none" id="navcol-2">
                <ul class="list-group list-group-horizontal text-end ms-auto">
                    <li class="list-group-item text-decoration-none"><a href="index.html" style="text-decoration:none"><strong class="text-muted">Home</strong></a></li>
                    <li class="list-group-item active text-decoration-none"><a class="text-decoration-none" href="AIChat.html"><strong class="text-muted">AI Chat</strong></a></li>
                    <li class="list-group-item text-decoration-none"><a class="text-decoration-none" href="#"><strong class="text-decoration-none text-muted">Features</strong></a></li>
                    <li class="list-group-item text-decoration-none"><a class="text-decoration-none" href="#"><strong class="text-muted">Knowledge Base</strong></a></li>
                </ul><a class="btn btn-primary ms-auto" role="button" href="Login.html">Sign In</a>
            </div>
        </div>
    </nav><!-- Start: Simple Bootstrap Chat --><div class="bootstrap_chat">
<div class="container py-5 px-4">
  <!-- For demo purpose-->
  <header class="text-center">
    <h1 class="display-4 text-white">AI enabled Chat</h1>
  </header>

 
    <!-- Chat Box-->
    <div class="col-12 px-0">
      <div id ="message-box" class="px-4 py-5 chat-box bg-white">
        <!-- Sender Message-->
        <div class="media w-50 mb-3">
          <div class="media-body ml-3">
            <div class="bg-light rounded py-2 px-3 mb-2">
              <p class="text-small mb-0 text-muted">Please post your question here</p>
            </div>
          </div>
        </div>


      </div>

      <!-- Typing area -->
      <form action="#" class="bg-light">
        <div class="input-group">
          <input id="input-text-box" type="text" placeholder="Type a message" aria-describedby="button-addon2" class="form-control rounded-0 border-0 py-4 bg-light">
          <div class="input-group-append">
            <script type="text/javascript">
              async function sendMessage() {
                  const userInput = document.getElementById('input-text-box').value;
                  const response = await fetch('/chat', {
                      method: 'POST',
                      headers: {
                          'Content-Type': 'application/json'
                      },
                      body: JSON.stringify({ message: userInput })
                  });
                  const data = await response.json();
                  const messagesDiv = document.getElementById('message-box');
                  const now = new Date();
                  const hours = String(now.getHours()).padStart(2, '0');
                  const minutes = String(now.getMinutes()).padStart(2, '0');
                  const seconds = String(now.getSeconds()).padStart(2, '0');
                  const timeString = `${hours}:${minutes}:${seconds}`;
        
                  if (data.message) {
                      messagesDiv.innerHTML += `<div class="media w-50 mb-3"><img src="https://res.cloudinary.com/mhmd/image/upload/v1564960395/avatar_usae7z.svg" alt="user" width="50" class="rounded-circle">
                  <div class="media-body ml-3">
                    <div class="bg-light rounded py-2 px-3 mb-2">
                      <p class="text-small mb-0 text-muted">${userInput}</p>
                    </div>
                    <p class="small text-muted">${timeString}</p>
                  </div>
                </div>`;
                      messagesDiv.innerHTML += `<div class="media w-50 ml-auto mb-3">
                  <div class="media-body">
                    <div class="bg-primary rounded py-2 px-3 mb-2">
                      <p class="text-small mb-0 text-white">${data.message}</p>
                    </div>
                    <p class="small text-muted">${timeString}</p>
                  </div>
                </div>`;
                  } else {
                      messagesDiv.innerHTML += `<p><strong>Error:</strong> ${data.error}</p>`;
                  }
                  document.getElementById('input-text-box').value = '';
              }
          </script>
            <button id="button-addon2" type="submit" class="btn btn-link" onclick="sendMessage()"> <i class="fa fa-paper-plane"></i></button>
          </div>
        </div>
      </form>

    </div>
  </div>
</div>
</div><!-- End: Simple Bootstrap Chat -->
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/bs-init.js"></script>
    
</body>

</html>